!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(d){var n,s=0,a=Array.prototype.slice;d.cleanData=(n=d.cleanData,function(e){for(var t,s,i=0;null!=(s=e[i]);i++)try{(t=d._data(s,"events"))&&t.remove&&d(s).triggerHandler("remove")}catch(e){}n(e)}),d.widget=function(e,s,t){var i,n,o,r,a={},h=e.split(".")[0];return e=e.split(".")[1],i=h+"-"+e,t||(t=s,s=d.Widget),d.expr[":"][i.toLowerCase()]=function(e){return!!d.data(e,i)},d[h]=d[h]||{},n=d[h][e],o=d[h][e]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},d.extend(o,n,{version:t.version,_proto:d.extend({},t),_childConstructors:[]}),(r=new s).options=d.widget.extend({},r.options),d.each(t,function(t,i){return d.isFunction(i)?void(a[t]=function(){var e,t=this._super,s=this._superApply;return this._super=n,this._superApply=o,e=i.apply(this,arguments),this._super=t,this._superApply=s,e}):void(a[t]=i);function n(){return s.prototype[t].apply(this,arguments)}function o(e){return s.prototype[t].apply(this,e)}}),o.prototype=d.widget.extend(r,{widgetEventPrefix:n&&r.widgetEventPrefix||e},a,{constructor:o,namespace:h,widgetName:e,widgetFullName:i}),n?(d.each(n._childConstructors,function(e,t){var s=t.prototype;d.widget(s.namespace+"."+s.widgetName,o,t._proto)}),delete n._childConstructors):s._childConstructors.push(o),d.widget.bridge(e,o),o},d.widget.extend=function(e){for(var t,s,i=a.call(arguments,1),n=0,o=i.length;n<o;n++)for(t in i[n])s=i[n][t],i[n].hasOwnProperty(t)&&void 0!==s&&(e[t]=d.isPlainObject(s)?d.isPlainObject(e[t])?d.widget.extend({},e[t],s):d.widget.extend({},s):s);return e},d.widget.bridge=function(o,t){var r=t.prototype.widgetFullName||o;d.fn[o]=function(s){var e="string"==typeof s,i=a.call(arguments,1),n=this;return s=!e&&i.length?d.widget.extend.apply(null,[s].concat(i)):s,e?this.each(function(){var e,t=d.data(this,r);return"instance"===s?(n=t,!1):t?d.isFunction(t[s])&&"_"!==s.charAt(0)?(e=t[s].apply(t,i))!==t&&void 0!==e?(n=e&&e.jquery?n.pushStack(e.get()):e,!1):void 0:d.error("no such method '"+s+"' for "+o+" widget instance"):d.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+s+"'")}):this.each(function(){var e=d.data(this,r);e?(e.option(s||{}),e._init&&e._init()):d.data(this,r,new t(s,this))}),n}},d.Widget=function(){},d.Widget._childConstructors=[],d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,t){t=d(t||this.defaultElement||this)[0],this.element=d(t),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=d(),this.hoverable=d(),this.focusable=d(),t!==this&&(d.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=d(t.style?t.ownerDocument:t.document||t),this.window=d(this.document[0].defaultView||this.document[0].parentWindow)),this.options=d.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:d.noop,_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(d.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:d.noop,widget:function(){return this.element},option:function(e,t){var s,i,n,o=e;if(0===arguments.length)return d.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(s=e.split(".")).shift(),s.length){for(i=o[e]=d.widget.extend({},this.options[e]),n=0;s.length-1>n;n++)i[s[n]]=i[s[n]]||{},i=i[s[n]];if(e=s.pop(),1===arguments.length)return void 0===i[e]?null:i[e];i[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=t}return this._setOptions(o),this},_setOptions:function(e){for(var t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(n,o,e){var r,a=this;"boolean"!=typeof n&&(e=o,o=n,n=!1),e?(o=r=d(o),this.bindings=this.bindings.add(o)):(e=o,o=this.element,r=this.widget()),d.each(e,function(e,t){function s(){return n||!0!==a.options.disabled&&!d(this).hasClass("ui-state-disabled")?("string"==typeof t?a[t]:t).apply(a,arguments):void 0}"string"!=typeof t&&(s.guid=t.guid=t.guid||s.guid||d.guid++);var e=e.match(/^([\w:-]*)\s*(.*)$/),i=e[1]+a.eventNamespace,e=e[2];e?r.delegate(e,i,s):o.bind(i,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t),this.bindings=d(this.bindings.not(e).get()),this.focusable=d(this.focusable.not(e).get()),this.hoverable=d(this.hoverable.not(e).get())},_delay:function(e,t){var s=this;return setTimeout(function(){return("string"==typeof e?s[e]:e).apply(s,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){d(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){d(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){d(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){d(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,t,s){var i,n,o=this.options[e];if(s=s||{},(t=d.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],n=t.originalEvent)for(i in n)i in t||(t[i]=n[i]);return this.element.trigger(t,s),!(d.isFunction(o)&&!1===o.apply(this.element[0],[t].concat(s))||t.isDefaultPrevented())}},d.each({show:"fadeIn",hide:"fadeOut"},function(o,r){d.Widget.prototype["_"+o]=function(t,e,s){var i=(e="string"==typeof e?{effect:e}:e)?!0!==e&&"number"!=typeof e&&e.effect||r:o,n=!d.isEmptyObject(e="number"==typeof(e=e||{})?{duration:e}:e);e.complete=s,e.delay&&t.delay(e.delay),n&&d.effects&&d.effects.effect[i]?t[o](e):i!==o&&t[i]?t[i](e.duration,e.easing,s):t.queue(function(e){d(this)[o](),s&&s.call(t[0]),e()})}}),d.widget}),function(r){"use strict";r.widget("aerolab.midnight",{options:{headerClass:"midnightHeader",innerClass:"midnightInner",defaultClass:"default",classPrefix:""},_headers:{},_headerInfo:{top:0,height:0},_$sections:[],_sections:[],_scrollTop:0,_documentHeight:0,_transformMode:!1,_resetLoop:null,refresh:function(){this._headerInfo={top:0,height:this.element.outerHeight()},this._$sections=r("[data-midnight]");for(var e=this._$sections.length-1;0<=e;e--)0<r(this._$sections[e]).parents(".masonry").length&&this._$sections.splice(e,1),r(this._$sections[e]).hasClass("full-width-section")||r(this._$sections[e]).hasClass("full-width-content")||r(this._$sections[e]).hasClass("parallax_slider_outer")||r(this._$sections[e]).hasClass("nectar-slider-wrap")||r(this._$sections[e]).hasClass("nectar-box-roll")||"page-header-wrap"==r(this._$sections[e]).attr("id")||"page-header-bg"==r(this._$sections[e]).attr("id")||"footer-outer"==r(this._$sections[e]).attr("id")||this._$sections.splice(e,1);this._sections=[],this._setupHeaders(),this.recalculate()},_create:function(){var e=this;this._scrollTop=window.pageYOffset||document.documentElement.scrollTop,this._documentHeight=r(document).height(),this._headers={},this._transformMode=this._getSupportedTransform(),this.refresh(),setInterval(function(){e._recalculateSections()},1e3),setInterval(function(){e._sections=[],e._setupHeaders(),e._recalculateSections(),e._updateHeaderHeight(),e._recalculateHeaders(),e._updateHeaders()},100),r(window).resize(function(){e.recalculate(),e.refresh()}).trigger("resize"),this._updateHeadersLoop()},recalculate:function(){this._recalculateSections(),this._updateHeaderHeight(),this._recalculateHeaders(),this._updateHeaders()},_getSupportedTransform:function(){for(var e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],t=0;t<e.length;t++)if(void 0!==document.createElement("div").style[e[t]])return e[t];return!1},_getContainerHeight:function(){var e=this.element.find("> ."+this.options.headerClass),s=0,i=0,n=this;return e.length?e.each(function(){var e=r(this),t=e.find("> ."+n.options.innerClass);t.length?(t.css("bottom","auto").css("overflow","auto"),i=t.outerHeight(),t.css("bottom","0")):(e.css("bottom","auto"),i=e.outerHeight(),e.css("bottom","0")),s=s<i?i:s}):s=i=this.element.outerHeight(),s},_setupHeaders:function(){var i=this,e=(this._headers[this.options.defaultClass]={},this._$sections.each(function(){var e;0==r(this).parents(".masonry").length&&"string"==typeof(e=r(this).data("midnight"))&&""!==(e=e.trim())&&(i._headers[e]={})}),this.element.css("padding-top"),this.element.css("padding-right"),this.element.css("padding-bottom"),this.element.css("padding-left"),this.element.css({position:"fixed",left:0,right:0}),this._updateHeaderHeight(),this.element.find("> ."+this.options.headerClass));e.length?e.filter("."+this.options.defaultClass).length||e.filter("."+this.options.headerClass+":first").clone(!0,!0).attr("class",this.options.headerClass+" "+this.options.defaultClass):this.element.wrapInner('<div class="'+this.options.headerClass+" "+this.options.defaultClass+'"></div>');var t,s,n=(e=this.element.find("> ."+this.options.headerClass)).filter("."+this.options.defaultClass).clone(!0,!0);for(t in this._headers)this._headers.hasOwnProperty(t)&&void 0===this._headers[t].element&&((s=e.filter("."+t)).length?this._headers[t].element=s:this._headers[t].element=n.clone(!0,!0).removeClass(this.options.defaultClass).addClass(t).appendTo(this.element),this._headers[t].element.css(s={position:"absolute",overflow:"hidden",top:0,left:0,right:0,bottom:0}),!1!==this._transformMode&&this._headers[t].element.css(this._transformMode,"translateZ(0)"),this._headers[t].element.find("> ."+this.options.innerClass).length||this._headers[t].element.wrapInner('<div class="'+this.options.innerClass+'"></div>'),this._headers[t].inner=this._headers[t].element.find("> ."+this.options.innerClass),this._headers[t].inner.css(s),!1!==this._transformMode&&this._headers[t].inner.css(this._transformMode,"translateZ(0)"),this._headers[t].from="",this._headers[t].progress=0);e.each(function(){var e,t=r(this),s=!1;for(e in i._headers)i._headers.hasOwnProperty(e)&&t.hasClass(e)&&(s=!0);t.find("> ."+i.options.innerClass).length||t.wrapInner('<div class="'+i.options.innerClass+'"></div>'),s?t.show():t.hide()})},_recalculateHeaders:function(){this._scrollTop=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,this._scrollTop=Math.max(this._scrollTop,0),this._scrollTop=Math.min(this._scrollTop,this._documentHeight);var e,t,s,i,n,o=this._headerInfo.height,r=this._scrollTop+this._headerInfo.top,a=r+o;for(n in"function"==typeof window.getComputedStyle&&(e=window.getComputedStyle(this.element[0],null),s=t=0,!1!==this._transformMode&&"string"==typeof e.transform&&null!==(i=e.transform.match(/(-?[0-9\.]+)/g))&&6<=i.length&&!isNaN(parseFloat(i[5]))&&(s=parseFloat(i[5])),r+=(t=0<=e.top.indexOf("px")&&!isNaN(parseFloat(e.top))?parseFloat(e.top):t)+s,a+=t+s),this._headers)this._headers.hasOwnProperty(n)&&(this._headers[n].from="",this._headers[n].progress=0);for(var h=0;h<this._sections.length;h++)a>=this._sections[h].start&&r<=this._sections[h].end&&(this._headers[this._sections[h].className].visible=!0,r>=this._sections[h].start&&a<=this._sections[h].end?(this._headers[this._sections[h].className].from="top",this._headers[this._sections[h].className].progress+=1):a>this._sections[h].end&&r<this._sections[h].end?(this._headers[this._sections[h].className].from="top",this._headers[this._sections[h].className].progress=1-(a-this._sections[h].end)/o):a>this._sections[h].start&&r<this._sections[h].start&&("top"===this._headers[this._sections[h].className].from?this._headers[this._sections[h].className].progress+=(a-this._sections[h].start)/o:(this._headers[this._sections[h].className].from="bottom",this._headers[this._sections[h].className].progress=(a-this._sections[h].start)/o)))},_updateHeaders:function(){if(void 0!==this._headers[this.options.defaultClass]){var e,t,s,i,n=0,o="";for(e in this._headers)this._headers.hasOwnProperty(e)&&""!==!this._headers[e].from&&(n+=this._headers[e].progress,o=e);for(t in n<1&&(""===this._headers[this.options.defaultClass].from?(this._headers[this.options.defaultClass].from="top"===this._headers[o].from?"bottom":"top",this._headers[this.options.defaultClass].progress=1-n):this._headers[this.options.defaultClass].progress+=1-n),this._headers)this._headers.hasOwnProperty(t)&&""!==!this._headers[t].from&&((110==(s=(s=100<=(s=100*(1-this._headers[t].progress))?110:s)<=-100?-110:s)&&0<r(this._headers[t].element).find(".sub-menu:visible").length||110==s&&0<r(this._headers[t].element).find(".widget_shopping_cart:visible").length)&&(i=0<r(this._headers[t].element).find(".sub-menu:visible").length?"#"+r(this._headers[t].element).find(".sub-menu:visible").parents(".menu-item-has-children").attr("id"):".cart-outer",r(".midnightHeader").each(function(){r(this).offset().top-r(window).scrollTop()<80?(r(this).css({"z-index":"9999"}).addClass("overflow"),r(this).find(".midnightInner").css("overflow","visible"),".cart-outer"!=i&&r(this).find(i).superfish("show",!0)):(r(this).css({"z-index":"auto"}).removeClass("overflow"),r(this).find(".midnightInner").css("overflow","hidden"),".cart-outer"!=i&&r(this).find(i).superfish("hide",!0))})),0<r("body.mobile").length&&(40<s?r(this._headers[t].element).addClass("no-pointer-events"):r(this._headers[t].element).removeClass("no-pointer-events")),"top"===this._headers[t].from?!1!==this._transformMode?(this._headers[t].element[0].style[this._transformMode]="translateY(-"+s+"%) translateZ(0)",this._headers[t].inner[0].style[this._transformMode]="translateY(+"+s+"%) translateZ(0)"):(this._headers[t].element[0].style.top="-"+s+"%",this._headers[t].inner[0].style.top="+"+s+"%"):!1!==this._transformMode?(this._headers[t].element[0].style[this._transformMode]="translateY(+"+s+"%) translateZ(0)",this._headers[t].inner[0].style[this._transformMode]="translateY(-"+s+"%) translateZ(0)"):(this._headers[t].element[0].style.top="+"+s+"%",this._headers[t].inner[0].style.top="-"+s+"%"))}},_recalculateSections:function(){this._documentHeight=r(document).height(),this._sections=[];for(var e=0;e<this._$sections.length;e++){var t=r(this._$sections[e]);this._sections.push({element:t,className:t.data("midnight"),start:t.offset().top,end:t.offset().top+t.outerHeight()})}},_updateHeaderHeight:function(){this._headerInfo.height=this._getContainerHeight(),this.element.css("height",this._headerInfo.height+"px")},_updateHeadersLoop:function(){var e=this;r("body").hasClass("box-animating")?("number"==typeof e._resetLoop&&clearTimeout(e._resetLoop),(0<r('.container-wrap > .container > .row > div[data-midnight="dark"].full-width-section:first-child').length||0<r('.container-wrap > .container > .row > div[data-midnight="dark"].full-width-content:first-child').length)&&(0<r("body.box-perspective-rolled").length?(setTimeout(function(){r(".midnightHeader.light").transition({y:"-100%"},270,"ease"),r(".midnightHeader.light > .midnightInner").transition({y:"100%"},270,"ease"),r(".midnightHeader.dark").transition({y:"0"},270,"ease"),r(".midnightHeader.dark > .midnightInner").transition({y:"0%"},270,"ease")},1200),setTimeout(function(){r(".midnightHeader.light").transition({y:"100%"},0),r(".midnightHeader.light > .midnightInner").transition({y:"-100%"},0)},1600)):(r(".midnightHeader.light").transition({y:"-100%"},0),r(".midnightHeader.light > .midnightInner").transition({y:"100%"},0),setTimeout(function(){r(".midnightHeader.light").transition({y:"0%"},300,"ease"),r(".midnightHeader.light > .midnightInner").transition({y:"0"},300,"ease"),r(".midnightHeader.dark").transition({y:"100%"},300,"ease"),r(".midnightHeader.dark > .midnightInner").transition({y:"-100%"},300,"ease")},300))),e._resetLoop=setTimeout(function(){e.refresh(),e._updateHeadersLoop()},1700)):(this._requestAnimationFrame(function(){e._updateHeadersLoop()}),this._recalculateHeaders(),this._updateHeaders())},_requestAnimationFrame:function(e){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)})(e)}})}(jQuery);