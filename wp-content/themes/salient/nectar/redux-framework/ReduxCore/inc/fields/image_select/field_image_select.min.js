!function(l){"use strict";redux.field_objects=redux.field_objects||{},redux.field_objects.image_select=redux.field_objects.image_select||{},l(document).ready(function(){}),redux.field_objects.image_select.init=function(e){e=e||l(document).find(".redux-group-tab:visible").find(".redux-container-image_select:visible"),l(e).each(function(){var n=l(this),e=n;(e=n.hasClass("redux-field-container")?e:n.parents(".redux-field-container:first")).is(":hidden")||e.hasClass("redux-field-init")&&(e.removeClass("redux-field-init"),n.find(".redux-image-select label img, .redux-image-select label .tiles").click(function(e){var i,s,t=l(this).closest("label").attr("for");if(l(this).parents("fieldset:first").find(".redux-image-select-selected").removeClass("redux-image-select-selected").find("input[type='radio']").attr("checked",!1),l(this).closest("label").find('input[type="radio"]').prop("checked"),l(this).closest("label").hasClass("redux-image-select-preset-"+t))return e.preventDefault(),e=l(this).closest("label").find("input"),i=e.data("presets"),null!=(s=e.data("merge"))&&("string"===l.type(s)&&(s=s.split("|")),l.each(i,function(e,t){!0!==s&&-1==l.inArray(e,s)||"object"!==l.type(redux.options[e])||(i[e]=l.extend(redux.options[e],i[e]))})),null!=e&&confirm(redux.args.preset_confirm)&&(n.find('label[for="'+t+'"]').addClass("redux-image-select-selected").find("input[type='radio']").attr("checked",!0),window.onbeforeunload=null,0===l("#import-code-value").length?l(this).append('<textarea id="import-code-value" style="display:none;" name="'+redux.args.opt_name+'[import_code]">'+JSON.stringify(i)+"</textarea>"):l("#import-code-value").val(JSON.stringify(i)),(0!==l("#publishing-action #publish").length?l("#publish"):l("#redux-import")).click()),!1;n.find('label[for="'+t+'"]').addClass("redux-image-select-selected").find("input[type='radio']").attr("checked",!0).trigger("change"),redux_change(l(this).closest("label").find('input[type="radio"]'))}),n.find("label").each(function(){l(this).find("img").is("[data-ntooltip]")&&0<l(this).find("img").attr("data-ntooltip").length&&l(this).qtip({content:l(this).find("img").attr("data-ntooltip"),style:"qtip-tipsy",position:{my:"top center",at:"bottom center"}})}),n.find(".tiles").qtip({content:{text:function(e,t){return"<img src='"+l(this).attr("rel")+"' style='max-width:150px;' alt='' />"}},style:"qtip-tipsy",position:{my:"top center",at:"bottom center"}}))})}}(jQuery);