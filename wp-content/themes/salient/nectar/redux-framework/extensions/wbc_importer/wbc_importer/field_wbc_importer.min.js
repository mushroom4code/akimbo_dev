!function(a){"use strict";a.redux=a.redux||{},a(document).ready(function(){a.redux.wbc_importer()}),a.redux.wbc_importer=function(){var s,o={Agency:{plugins:["js_composer_salient"]},App:{plugins:["js_composer_salient"]},Ascend:{plugins:["js_composer_salient","woocommerce"]},Band:{plugins:["js_composer_salient"]},"Blog-Magazine":{plugins:["js_composer_salient"]},"Blog-Ultimate":{plugins:["js_composer_salient"]},Business:{plugins:["js_composer_salient","woocommerce"]},"Business-2":{plugins:["js_composer_salient"]},"Company-Startup":{plugins:["js_composer_salient"]},Corporate:{plugins:["js_composer_salient"]},"Corporate-2":{plugins:["js_composer_salient"]},"Corporate-Creative":{plugins:["js_composer_salient"]},"Dark-Blog":{plugins:["js_composer_salient"]},"Ecommerce-Ultimate":{plugins:["js_composer_salient","woocommerce","yith-woocommerce-ajax-navigation"]},"Ecommerce-Creative":{plugins:["js_composer_salient","woocommerce","yith-woocommerce-ajax-navigation","popup-maker"]},"Old-School-Ecommerce":{plugins:["js_composer_salient","woocommerce"]},Frostwave:{plugins:["js_composer_salient","woocommerce"]},"Fullscreen Portfolio Slider":{plugins:["js_composer_salient"]},"Landing Product":{plugins:["js_composer_salient"]},"Landing Service":{plugins:["js_composer_salient"]},"Minimal Portfolio":{plugins:["js_composer_salient"]},"Old-School-All-Purpose":{plugins:["js_composer_salient","woocommerce"]},"One-Page":{plugins:["js_composer_salient"]},Photography:{plugins:["js_composer_salient"]},Restaurant:{plugins:["js_composer_salient"]},"Simple Blog":{plugins:["js_composer_salient"]}};a(".wrap-importer.theme.not-imported, #wbc-importer-reimport").unbind("click").on("click",function(e){var t=(s=a(this)).is("#wbc-importer-reimport")?a(this).parents(".wrap-importer"):s,r=0<t.find(".theme-name").length?t.find(".theme-name").text():"";a(".nectar-demo-importer-selection-modal .cnkt-plugin-installer .plugin, .nectar-demo-importer-selection-modal .cnkt-plugin-installer").hide(),a.each(o,function(e,t){if(e==r){var o=t.plugins;if(void 0!==o&&0<o.length)for(var i=0;i<o.length;i++)a(".nectar-demo-importer-selection-modal .cnkt-plugin-installer h4[data-slug]").each(function(){a(this).attr("data-slug")==o[i]&&(a(this).parents(".plugin").show(),a(this).parents(".cnkt-plugin-installer").show())})}}),a(".nectar-demo-importer-selection-modal .switch-options.salient").addClass("activated"),a(".nectar-demo-importer-selection-modal-backdrop, .nectar-demo-importer-selection-modal").fadeIn(200),a(".nectar-demo-importer-selection-modal .nectar-preview-img").css("background-image","url("+t.find(".wbc_image").attr("src")+")"),a(".nectar-demo-importer-selection-modal .nectar-demo-preview-header h2").text(r)}),a(".nectar-demo-importer-selection-modal a.close").unbind("click").on("click",function(e){e.preventDefault(),a(".nectar-demo-importer-selection-modal-backdrop, .nectar-demo-importer-selection-modal").fadeOut(250)}),a(".nectar-demo-importer-selection-modal a.theme-demo-import-option").unbind("click").on("click",function(e){e.preventDefault(),a(this).parents(".demo-importer-form-row").find(".switch-options.salient").toggleClass("activated")}),a(".nectar-demo-importer-selection-modal .switch-options.salient").unbind("click").on("click",function(e){e.preventDefault(),a(this).toggleClass("activated")}),a(".nectar-demo-importer-selection-modal a.submit").unbind("click").on("click",function(e){if(e.preventDefault(),0!=s.length){var t,i,e=a(this).parents(".nectar-demo-importer-selection-modal"),r=s,o=!1;if(r.is("#wbc-importer-reimport")&&(o=!0,s.hasClass("rendered")||(r=s.parents(".wrap-importer"))),!r.hasClass("imported")||0!=o)if(1==o&&r.removeClass("active imported").addClass("not-imported"),0!=e.find(".switch-options.activated").length)return a(".nectar-demo-importer-selection-modal a.close").trigger("click"),r.find(".spinner").css("display","inline-block"),r.removeClass("active imported"),r.find(".importer-button").hide(),t=r.data(),i=!1,t.action="redux_wbc_importer",t.demo_import_id=r.attr("data-demo-id"),t.nonce=r.attr("data-nonce"),t.type="import-demo-content",t.wbc_import=1==o?"re-importing":" ",t.import_demo_content=0<e.find(".import-nectar-theme-demo-content > .switch-options.activated").length?"true":"false",t.import_theme_option_settings=0<e.find(".import-nectar-theme-option-settings > .switch-options.activated").length?"true":"false",t.import_demo_widgets=0<e.find(".import-nectar-theme-demo-widgets > .switch-options.activated").length?"true":"false",r.find(".wbc_image").css("opacity","0.5"),jQuery.post(ajaxurl,t,function(e){r.find(".wbc_image").css("opacity","1"),r.find(".spinner").css("display","none"),0<e.length&&e.match(/Have fun!/gi)||0<e.length&&e.match(/success/gi)?(0==o&&(r.addClass("rendered").find(".wbc-importer-buttons .importer-button").removeClass("import-demo-data"),r.find(".theme-actions .wbc-importer-buttons").append('<div id="wbc-importer-reimport" class="wbc-importer-buttons button-primary import-demo-data importer-button">Re-Import</div>')),r.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),r.find(".importer-button").attr("style",""),r.addClass("imported active").removeClass("not-imported"),i=!0,n(t),location.reload(!0)):(r.find(".import-demo-data").show(),1==o&&(r.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),r.find(".importer-button").attr("style",""),r.addClass("imported active").removeClass("not-imported")),i=!0,alert("There was an error importing demo content: \n\n"+e.replace(/(<([^>]+)>)/gi,"")))}),r.prepend('<div class="wbc-progress-back"><div class="wbc-progress-bar button-primary"><span class="wbc-progress-count">0%</span></div>'),setTimeout(function(){n(t)},2e3),!1}function n(o){o.action="redux_wbc_importer_progress",0==i?jQuery.ajax({url:ajaxurl,data:o,success:function(e){var t=jQuery.parseJSON(e);0<e.length&&"object"==typeof t&&(e=0<(e=Math.floor(t.imported_count/t.total_post*100))?e-1:e,r.find(".wbc-progress-bar").css("width",e+"%"),r.find(".wbc-progress-count").text(e+"%"),setTimeout(function(){n(o)},2e3))}}):r.find(".wbc-progress-back").remove()}})}}(jQuery);